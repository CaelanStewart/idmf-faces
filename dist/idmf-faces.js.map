{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./node_modules/regenerator-runtime/runtime-module.js","webpack:///./node_modules/regenerator-runtime/runtime.js","webpack:///./src/js/bus.js","webpack:///./src/js/component.js","webpack:///./src/js/components/canvas.js","webpack:///./src/js/components/image-loader.js","webpack:///./src/js/components/inputs.js","webpack:///./src/js/components/inputs/pitch-shift.js","webpack:///./src/js/components/inputs/range-input.js","webpack:///./src/js/components/inputs/sample-rate.js","webpack:///./src/js/components/player.js","webpack:///./src/js/components/player/image.js","webpack:///./src/js/components/preview.js","webpack:///./src/js/controller.js","webpack:///./src/js/controllers/audio.js","webpack:///./src/js/controllers/buffer.js","webpack:///./src/js/controllers/face-to-sound.js","webpack:///./src/js/hierarchical-bus.js","webpack:///./src/js/idmf-faces.js","webpack:///./src/js/util/functions.js","webpack:///./src/scss/idmf-faces.scss"],"names":["Bus","origin","listeners","hooks","type","reference","event","signature","bus","stopped","stop","object","variant","removeFromStack","stack","getStack","index","lastIndexOf","splice","Math","max","push","executor","Array","isArray","one","traverseStack","method","callback","pushToStack","args","hook","triggerHook","listener","fireListeners","Component","app","parent","element","children","HierarchicalBus","getParentBus","constructor","name","instance","getChildStack","controller","pushChild","root","document","selector","querySelector","from","querySelectorAll","component","Controller","Canvas","canvas","query","updateContext","context","getContext","clearRect","width","height","dataUrl","x","y","image","Image","promiseToCallMeBack","onload","src","setDimensions","naturalWidth","naturalHeight","clear","drawImage","dimensions","Object","getOwnPropertyNames","dimension","console","log","w","h","getImageData","ImageLoader","input","readFile","reader","file","readAsDataURL","getFile","throwMissingFileError","fileReader","FileReader","target","Error","files","Inputs","sampleRate","SampleRate","pitchShift","PitchShift","on","stopPropagation","emit","RangeInput","elements","cacheElements","attachEvents","updateValue","preview","addEventListener","value","textContent","Player","audio","make","Audio","faceToSound","FaceToSound","play","onPlay","onStop","onImageChange","drawImageFromDataUrl","result","updateImageData","error","handleError","initContext","playing","updateImage","getDataUrl","Preview","onChange","setAttribute","init","boot","ready","makeBus","bindMethodsToInstance","prototype","next","getPrototypeOf","property","bind","alert","message","getGenericErrorMessage","window","__lastErrorOrigin","isPrototypeOf","components","getComponentElements","length","getComponentElementsRoot","channels","destination","queue","AudioContext","AudioBuffer","inputs","buffer","offset","getBufferAtOffset","prepare","prepareBufferAtOffset","flushBufferAtOffset","cycles","time","promise","playBufferAtOffset","async","flushPreviousBuffer","prepareNextBuffer","timeEnd","sleep","beginLoop","flush","createBuffer","channel","i","getChannelData","onPitchShiftChange","source","updatePitchShift","playbackRate","createBufferSource","connect","start","onended","pixels","data","p","getPixelCount","getChunk","queueBuffer","once","hookParentIntoBus","localSignature","propagationStopped","IDMFFaces","player","idmf","DescopedPromise","resolve","reject","Promise","res","rej","concat","arguments","then","delay","setTimeout"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA,iBAAiB,mBAAO,CAAC,iFAAqB;;;;;;;;;;;;ACA9C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,iBAAiB,mBAAO,CAAC,gEAAW;;AAEpC;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,KAAK;AACL,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;;AAEA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,cAAc;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,kBAAkB;AACnD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,8CAA8C,QAAQ;AACtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA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","file":"/dist/idmf-faces.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","module.exports = require(\"regenerator-runtime\");\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() {\n  return this || (typeof self === \"object\" && self);\n})() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() {\n    return this || (typeof self === \"object\" && self);\n  })() || Function(\"return this\")()\n);\n","class Bus {\r\n    constructor(origin = null) {\r\n        this.origin = origin;\r\n        this.listeners = { };\r\n        this.hooks = { };\r\n    }\r\n\r\n    getStack(type, reference) {\r\n        if ( ! this[type][reference]) {\r\n            this[type][reference] = [ ];\r\n        }\r\n\r\n        return this[type][reference];\r\n    }\r\n\r\n    signature(event) {\r\n        let signature = {\r\n            event,\r\n            origin: this.origin,\r\n            bus: this,\r\n            stopped: false,\r\n            stop() {\r\n                signature.stopped = true;\r\n            }\r\n        };\r\n\r\n        return signature;\r\n    }\r\n\r\n    removeFromStack(type, reference, object) {\r\n        if ( ! reference) {\r\n            for (let variant in this[type]) {\r\n                this.removeFromStack(type, variant, object);\r\n            }\r\n        } else if ( ! object) {\r\n            delete this[type][reference];\r\n        } else {\r\n            let stack = this.getStack(type, reference),\r\n                index = stack.lastIndexOf(object);\r\n\r\n            stack.splice(\r\n                Math.max(index, 0),\r\n                index < 0 ? 0 : 1\r\n            )\r\n        }\r\n    }\r\n\r\n    pushToStack(type, reference, object) {\r\n        this.getStack(type, reference).push(object);\r\n    }\r\n\r\n    traverseStack(type, reference, executor) {\r\n        if (Array.isArray(reference)) {\r\n            for (let one of reference) {\r\n                this.traverseStack(type, one, executor);\r\n            }\r\n        } else {\r\n            for (let object of this.getStack(type, reference)) {\r\n                if ( ! executor(object)) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    hook(method, callback) {\r\n        this.pushToStack('hooks', method, callback);\r\n    }\r\n\r\n    unhook(method = null, callback = null) {\r\n        this.removeFromStack('hooks', method, callback);\r\n    }\r\n\r\n    triggerHook(method, ...args) {\r\n        this.traverseStack('hooks', method, hook => {\r\n            hook(...args);\r\n        })\r\n    }\r\n\r\n    on(event, callback) {\r\n        this.triggerHook('before-on', event, callback);\r\n\r\n        this.pushToStack('listeners', event, callback);\r\n\r\n        this.triggerHook('on', event, callback);\r\n    }\r\n\r\n    off(event = null, callback = null) {\r\n        this.triggerHook('before-off', event, callback);\r\n\r\n        this.removeFromStack('listeners', event, callback);\r\n\r\n        this.triggerHook('off', event, callback);\r\n    }\r\n\r\n    once(event, callback) {\r\n        this.triggerHook('before-once', event, callback);\r\n\r\n        let listener = (...args) => {\r\n            this.removeFromStack('listeners', event, listener);\r\n\r\n            callback(...args);\r\n        };\r\n\r\n        this.pushToStack('listeners', event, listener);\r\n\r\n        this.triggerHook('once', event, callback, listener);\r\n    }\r\n\r\n    fireListeners(event, signature, ...args) {\r\n        this.traverseStack('listeners', event, listener => {\r\n            listener(signature, ...args);\r\n\r\n            this.triggerHook('emit', signature, ...args);\r\n\r\n            return ! signature.stopped;\r\n        });\r\n    }\r\n\r\n    emit(event, ...args) {\r\n        let signature = this.signature(event);\r\n\r\n        this.triggerHook('before-emit', signature, ...args);\r\n\r\n        this.fireListeners(event, signature, ...args);\r\n\r\n        this.triggerHook('after-emit', signature, ...args);\r\n    }\r\n}\r\n\r\nexport default Bus;","import Controller from 'controller';\r\nimport HierarchicalBus from 'hierarchical-bus';\r\n\r\nclass Component extends Controller {\r\n    init(app, parent, element, ...args) {\r\n        this.element = element;\r\n        this.parent = parent;\r\n        this.children = { };\r\n\r\n        super.init(app, ...args);\r\n    }\r\n\r\n    getParentBus() {\r\n        return this.parent && this.parent.bus || null;\r\n    }\r\n\r\n    /**\r\n     * Overriden to return a HierarchicalBus instead of a normal Bus, so that it propagates events to the parent, if it\r\n     * was not stopped by any listeners on the local HierarchicalBus.\r\n     *\r\n     * @returns {HierarchicalBus}\r\n     */\r\n    makeBus() {\r\n        return new HierarchicalBus(this, this.getParentBus());\r\n    }\r\n\r\n    getGenericErrorMessage() {\r\n        return `[${this.constructor.name}]: Error in Component - instance logged below and assigned to window.__lastErrorOrigin.`;\r\n    }\r\n\r\n    getChildStack(name) {\r\n        if ( ! this.children[name]) {\r\n            this.children[name] = [ ];\r\n        }\r\n\r\n        return this.children[name];\r\n    }\r\n\r\n    pushChild(instance) {\r\n        this.getChildStack(instance.constructor.name).push(instance);\r\n\r\n        return instance;\r\n    }\r\n\r\n    make(controller, ...args) {\r\n        return this.pushChild(\r\n            new controller(this.app, ...args)\r\n        );\r\n    }\r\n\r\n    getComponentElementsRoot(root) {\r\n        return root || this.element || document;\r\n    }\r\n\r\n    query(selector) {\r\n        return this.element.querySelector(selector);\r\n    }\r\n\r\n    queryAll(selector) {\r\n        return Array.from(this.element.querySelectorAll(selector));\r\n    }\r\n\r\n    static is(component) {\r\n        return component instanceof Component;\r\n    }\r\n}\r\n\r\nexport default Component;","import Component from 'component';\r\nimport {promiseToCallMeBack} from \"util/functions\";\r\n\r\nclass Canvas extends Component {\r\n    ready() {\r\n        this.canvas = this.query('canvas');\r\n\r\n        this.updateContext();\r\n    }\r\n\r\n    updateContext() {\r\n        this.context = this.canvas.getContext('2d');\r\n    }\r\n\r\n    clear() {\r\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n    }\r\n\r\n    async drawImageFromDataUrl(dataUrl, x = 0, y = 0) {\r\n        let image = new Image();\r\n\r\n        await promiseToCallMeBack(callback => {\r\n            image.onload = callback;\r\n\r\n            image.src = dataUrl;\r\n        });\r\n\r\n        this.setDimensions({\r\n            width: image.naturalWidth,\r\n            height: image.naturalHeight\r\n        });\r\n\r\n        this.clear();\r\n\r\n        this.context.drawImage(image, x, y);\r\n    }\r\n\r\n    setDimensions(dimensions) {\r\n        for (let dimension of Object.getOwnPropertyNames(dimensions)) {\r\n            console.log(`Setting ${dimension} of canvas to: ${dimensions[dimension]}`)\r\n            this.canvas[dimension] = dimensions[dimension];\r\n        }\r\n    }\r\n\r\n    getImageData(x, y, w, h) {\r\n        console.log('getting image data', x || 0, y || 0, w || this.canvas.width, h || this.canvas.height);\r\n        return this.context.getImageData(x || 0, y || 0, w || this.canvas.width, h || this.canvas.height);\r\n    }\r\n\r\n    getPixelCount() {\r\n        return this.canvas.width * this.canvas.height;\r\n    }\r\n}\r\n\r\nexport default Canvas;","import Component from 'component';\r\nimport {promiseToCallMeBack} from 'util/functions';\r\n\r\nclass ImageLoader extends Component {\r\n    ready() {\r\n        this.input = this.query('input[type=\"file\"]');\r\n    }\r\n\r\n    async getDataUrl() {\r\n        return await this.readFile((reader, file) => {\r\n            reader.readAsDataURL(file);\r\n        })\r\n    }\r\n\r\n    async readFile(hook) {\r\n        let file = this.getFile();\r\n\r\n        if ( ! file) {\r\n            this.throwMissingFileError();\r\n        }\r\n\r\n        let fileReader = new FileReader();\r\n\r\n        let [event] = await promiseToCallMeBack(callback => {\r\n            fileReader.onload = callback;\r\n\r\n            hook(fileReader, file);\r\n        });\r\n\r\n        return event.target;\r\n    }\r\n\r\n    throwMissingFileError() {\r\n        throw new Error('Failed to load file. Have you actually uploaded a fucking file?');\r\n    }\r\n\r\n    getFile() {\r\n        return this.input.files && this.input.files[0] || null;\r\n    }\r\n}\r\n\r\nexport default ImageLoader;","import Component from 'component';\r\nimport SampleRate from 'components/inputs/sample-rate';\r\nimport PitchShift from 'components/inputs/pitch-shift';\r\n\r\nclass Inputs extends Component {\r\n    ready() {\r\n        this.sampleRate = this.component(SampleRate);\r\n        this.pitchShift = this.component(PitchShift);\r\n    }\r\n}\r\n\r\nexport default Inputs;","import RangeInput from 'components/inputs/range-input';\r\n\r\nclass PitchShift extends RangeInput {\r\n    ready() {\r\n        // Hook into change, prevent propagation, and emit prefixed version\r\n        this.bus.on('change', event => {\r\n            event.stopPropagation();\r\n\r\n            this.bus.emit('pitch-shift-change');\r\n        });\r\n\r\n        super.ready();\r\n    }\r\n}\r\n\r\nexport default PitchShift;","import Component from 'component';\r\n\r\nclass RangeInput extends Component {\r\n    ready() {\r\n        this.elements = { };\r\n\r\n        this.cacheElements();\r\n        this.attachEvents();\r\n\r\n        this.updateValue();\r\n    }\r\n\r\n    cacheElements() {\r\n        this.elements.input = this.query('input[type=\"range\"]');\r\n        this.elements.preview = this.query('.preview');\r\n    }\r\n\r\n    attachEvents() {\r\n        this.elements.input.addEventListener('input', this.updateValue);\r\n    }\r\n\r\n    updateValue() {\r\n        this.value = +this.elements.input.value;\r\n        this.elements.preview.textContent = this.value;\r\n\r\n        this.bus.emit('change', this.value);\r\n    }\r\n}\r\n\r\nexport default RangeInput;","import RangeInput from 'components/inputs/range-input';\r\n\r\nclass SampleRate extends RangeInput {\r\n    ready() {\r\n        // Hook into change, prevent propagation, and emit prefixed version\r\n        this.bus.on('change', event => {\r\n            event.stopPropagation();\r\n\r\n            this.bus.emit('sample-rate-change');\r\n        });\r\n\r\n        super.ready();\r\n    }\r\n}\r\n\r\nexport default SampleRate;","import Component from 'component';\r\nimport Audio from 'controllers/audio';\r\nimport Image from 'components/player/image';\r\nimport Canvas from 'components/canvas';\r\nimport FaceToSound from 'controllers/face-to-sound';\r\n\r\nclass Player extends Component {\r\n    ready() {\r\n        this.elements = { };\r\n\r\n        this.image = this.component(Image);\r\n        this.canvas = this.component(Canvas);\r\n\r\n        this.audio = this.make(Audio);\r\n        this.faceToSound = this.make(FaceToSound, this.canvas, this.audio);\r\n\r\n        this.cacheElements();\r\n        this.attachEvents();\r\n    }\r\n\r\n    cacheElements() {\r\n        this.elements.play = this.query('#play');\r\n        this.elements.stop = this.query('#stop');\r\n    }\r\n\r\n    attachEvents() {\r\n        this.elements.play.addEventListener('click', this.onPlay);\r\n        this.elements.stop.addEventListener('click', this.onStop);\r\n\r\n        this.image.bus.on('image-change', this.onImageChange);\r\n    }\r\n\r\n    async onImageChange(event, image) {\r\n        await this.canvas.drawImageFromDataUrl(image.result);\r\n\r\n        this.faceToSound.updateImageData();\r\n    }\r\n\r\n    onPlay() {\r\n        try {\r\n            this.play();\r\n        } catch (error) {\r\n            this.handleError(error);\r\n        }\r\n    }\r\n\r\n    onStop() {\r\n        try {\r\n            this.stop();\r\n        } catch (error) {\r\n            this.handleError(error);\r\n        }\r\n    }\r\n\r\n    play() {\r\n        if ( ! this.audio.context) {\r\n            this.audio.initContext();\r\n        }\r\n\r\n        if ( ! this.image.getFile()) {\r\n            this.image.throwMissingFileError();\r\n        }\r\n\r\n        if (this.audio.playing) {\r\n            throw new Error('Your face is already playing. Do you want to listen to two of your faces simultaneously or something?')\r\n        }\r\n\r\n        this.faceToSound.play();\r\n\r\n        this.bus.emit('play');\r\n    }\r\n\r\n    stop() {\r\n        this.faceToSound.stop();\r\n\r\n        this.bus.emit('stop');\r\n    }\r\n}\r\n\r\nexport default Player;","import ImageLoader from 'components/image-loader';\r\n\r\nclass Image extends ImageLoader {\r\n    ready() {\r\n        super.ready();\r\n\r\n        this.attachEvents();\r\n    }\r\n\r\n    attachEvents() {\r\n        this.input.addEventListener('change', this.updateImage);\r\n    }\r\n\r\n    async updateImage() {\r\n        this.image = await this.getDataUrl();\r\n\r\n        this.bus.emit('image-change', this.image);\r\n    }\r\n}\r\n\r\nexport default Image;","import Component from 'component';\r\n\r\nclass Preview extends Component {\r\n    ready() {\r\n        this.elements = { };\r\n\r\n        this.cacheElements();\r\n        this.attachEvents();\r\n    }\r\n\r\n    cacheElements() {\r\n        this.elements.preview = document.querySelector('#preview');\r\n    }\r\n\r\n    attachEvents() {\r\n        this.app.bus.on('image-change', this.onChange);\r\n    }\r\n\r\n    onChange(event, image) {\r\n        this.elements.preview.setAttribute('src', image.result);\r\n    }\r\n}\r\n\r\nexport default Preview;","import Bus from 'bus';\r\n\r\nclass Controller {\r\n    constructor(...args) {\r\n        this.init(...args);\r\n    }\r\n\r\n    init(app, ...args) {\r\n        this.boot(app, ...args);\r\n\r\n        this.ready(...args);\r\n    }\r\n\r\n    ready() {\r\n        // To be overridden by derived classes\r\n    }\r\n\r\n    makeBus() {\r\n        return new Bus(this);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {Controller} app\r\n     * @param args\r\n     */\r\n    boot(app, ...args) {\r\n        /**\r\n         * @property {Controller} app\r\n         */\r\n        this.app = app;\r\n        this.bus = this.makeBus();\r\n\r\n        this.bindMethodsToInstance();\r\n    }\r\n\r\n    bindMethodsToInstance() {\r\n        let prototype, next = () => (prototype = Object.getPrototypeOf(prototype || this));\r\n\r\n        do {\r\n\t\t\tnext();\r\n\r\n            for (let property of Object.getOwnPropertyNames(prototype)) {\r\n                if (typeof this[property] !== 'function' || property === 'constructor') {\r\n                    continue;\r\n                }\r\n\r\n                this[property] = this[property].bind(this);\r\n            }\r\n        } while (prototype.constructor !== Controller);\r\n    }\r\n\r\n    getGenericErrorMessage() {\r\n        return `[${this.constructor.name}]: Error in Controller - instance logged below and assigned to window.__lastErrorOrigin.`;\r\n    }\r\n\r\n    handleError(error) {\r\n        alert(error.message);\r\n\r\n        console.error(this.getGenericErrorMessage());\r\n        console.log(this);\r\n        window.__lastErrorOrigin = this;\r\n\r\n        throw error;\r\n    }\r\n\r\n    make(controller, ...args) {\r\n        return new controller(this.app, ...args)\r\n    }\r\n\r\n    getComponentElementsRoot(root) {\r\n        return root || document;\r\n    }\r\n\r\n    component(controller, ...args) {\r\n        if ( ! Controller.isPrototypeOf(controller)) {\r\n            console.log(controller);\r\n            throw new Error('Invalid Controller specified, cannot get component elements');\r\n        }\r\n\r\n        let components = [ ];\r\n\r\n        for (let element of this.getComponentElements(controller)) {\r\n            components.push(\r\n                this.make(controller, this, element, ...args)\r\n            );\r\n        }\r\n\r\n        return components.length < 2\r\n            ? components[0] || null\r\n            : components;\r\n    }\r\n\r\n    getComponentElements(controller, root) {\r\n        let selector = `component[name=\"${controller.name}\"]`;\r\n\r\n        return this.getComponentElementsRoot(root).querySelectorAll(selector);\r\n    }\r\n\r\n    static is(controller) {\r\n        return controller instanceof Controller;\r\n    }\r\n}\r\n\r\nexport default Controller;","import Controller from 'controller';\r\nimport AudioBuffer from 'controllers/buffer';\r\nimport {async, sleep, promiseToCallMeBack} from \"util/functions\";\r\n\r\nclass Audio extends Controller {\r\n    ready(channels = 1) {\r\n        this.channels = channels;\r\n\r\n        this.context = null;\r\n        this.destination = null;\r\n        this.playing = false;\r\n        this.length = 0;\r\n        this.queue = [ ];\r\n        this.index = 0;\r\n    }\r\n\r\n    initContext() {\r\n        this.context = new AudioContext();\r\n        this.destination = this.context.destination;\r\n    }\r\n\r\n    createBuffer(length) {\r\n        return this.make(AudioBuffer, this, length, this.app.inputs.sampleRate.value);\r\n    }\r\n\r\n    queueBuffer(buffer) {\r\n        this.queue.push(buffer);\r\n\r\n        ++this.length;\r\n\r\n        return buffer;\r\n    }\r\n\r\n    getBufferAtOffset(offset) {\r\n        return this.queue[this.index + offset] || null;\r\n    }\r\n\r\n    getCurrentBuffer() {\r\n        return this.getBufferAtOffset(0);\r\n    }\r\n\r\n    getNextBuffer() {\r\n        return this.getBufferAtOffset(1);\r\n    }\r\n\r\n    getPrevBuffer() {\r\n        return this.getBufferAtOffset(-1);\r\n    }\r\n\r\n    flushBufferAtOffset(offset) {\r\n        let index = this.index + offset;\r\n\r\n        if (this.queue[index]) {\r\n            return this.queue.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    prepareBufferAtOffset(offset) {\r\n        let buffer = this.getBufferAtOffset(offset);\r\n\r\n        if (buffer) {\r\n            buffer.prepare();\r\n        }\r\n    }\r\n\r\n    prepareNextBuffer() {\r\n        this.prepareBufferAtOffset(1);\r\n    }\r\n\r\n    flushPreviousBuffer() {\r\n        this.flushBufferAtOffset(-1);\r\n    }\r\n\r\n    playBufferAtOffset(offset) {\r\n        let buffer = this.getBufferAtOffset(offset);\r\n\r\n        if (buffer) {\r\n            return buffer.play();\r\n        }\r\n\r\n        console.log('non-existent buffer at offset: ', offset, this.index);\r\n\r\n        return promiseToCallMeBack(callback => callback());\r\n    }\r\n\r\n    async beginLoop() {\r\n        this.prepareBufferAtOffset(0);\r\n\r\n        let cycles = 0;\r\n\r\n        while (this.playing) {\r\n            while (this.index < this.length && this.playing) {\r\n                console.time('playing current buffer');\r\n                let promise = this.playBufferAtOffset(0);\r\n\r\n                async(this.flushPreviousBuffer);\r\n                async(this.prepareNextBuffer);\r\n\r\n                await promise;\r\n\r\n                console.timeEnd('playing current buffer');\r\n\r\n                this.bus.emit('next');\r\n\r\n                if (this.playing) {\r\n                    ++this.index;\r\n                }\r\n\r\n                console.log(this.length);\r\n            }\r\n\r\n            await sleep(10);\r\n            ++cycles;\r\n\r\n            if (cycles % 20 === 0) {\r\n                console.log('waiting for buffer')\r\n            }\r\n        }\r\n\r\n        console.log(this.index, this.length);\r\n    }\r\n\r\n    play() {\r\n        this.playing = true;\r\n\r\n        console.log(this.index);\r\n\r\n        this.beginLoop();\r\n    }\r\n\r\n    pause() {\r\n        this.playing = false;\r\n    }\r\n\r\n    stop() {\r\n        this.playing = false;\r\n\r\n        this.flush();\r\n    }\r\n\r\n    flush() {\r\n        this.queue = [ ];\r\n        this.index = 0;\r\n        this.length = 0;\r\n\r\n        console.log('flush');\r\n    }\r\n}\r\n\r\nexport default Audio;","import Controller from 'controller';\r\nimport {promiseToCallMeBack} from \"../util/functions\";\r\nimport Bus from \"../bus\";\r\n\r\nclass AudioBuffer extends Controller {\r\n    ready(audio, length, sampleRate) {\r\n        this.audio = audio;\r\n        this.channels = this.audio.channels;\r\n        this.context = this.audio.context;\r\n        this.length = length;\r\n        this.sampleRate = sampleRate;\r\n        this.buffer = this.audio.context.createBuffer(this.channels, length, sampleRate);\r\n\r\n        this.channel = new Array(this.channels);\r\n\r\n        for (let i = 0; i < this.channels; ++i) {\r\n            this.channel[i] = this.buffer.getChannelData(i);\r\n        }\r\n\r\n        this.app.bus.on('pitch-shift-change', this.onPitchShiftChange);\r\n        this.app.bus.on('stop', this.onStop);\r\n    }\r\n\r\n    onPitchShiftChange() {\r\n        if (this.source) {\r\n            this.updatePitchShift();\r\n        }\r\n    }\r\n\r\n    updatePitchShift() {\r\n        this.source.playbackRate.value = this.app.inputs.pitchShift.value;\r\n    }\r\n\r\n    onStop() {\r\n        this.source.stop();\r\n    }\r\n\r\n    prepare() {\r\n        this.source = this.context.createBufferSource();\r\n\r\n        this.source.buffer = this.buffer;\r\n\r\n        this.source.connect(this.context.destination);\r\n\r\n        this.updatePitchShift();\r\n\r\n        return this;\r\n    }\r\n\r\n    async play() {\r\n        this.updatePitchShift();\r\n\r\n        this.source.start();\r\n\r\n        await promiseToCallMeBack(callback => {\r\n            this.source.onended = callback;\r\n        });\r\n\r\n        console.log('ended');\r\n    }\r\n}\r\n\r\nexport default AudioBuffer;","import Controller from 'controller';\r\nimport {promiseToCallMeBack, DescopedPromise} from 'util/functions';\r\n\r\nclass FaceToSound extends Controller {\r\n    ready(canvas, audio) {\r\n        this.canvas = canvas;\r\n        this.audio = audio;\r\n\r\n        this.updateImageData();\r\n    }\r\n\r\n    getChunk(offset, length) {\r\n        let buffer = this.audio.createBuffer(length),\r\n            channel = buffer.channel[0],\r\n            // channel = new Array(length),\r\n            pixels = this.data.data;\r\n\r\n        // The Image data is a linear list of values, where each segment of four values maps to RGBA: [R,G,B,A, R,G,B,A]\r\n        offset = offset * 4;\r\n\r\n        for (let i = 0; i < length * 4; i += 4) {\r\n            let p = i + offset;\r\n\r\n            channel[i / 4] = (\r\n                (\r\n                    // Average of RGB\r\n                    (pixels[p] + pixels[p + 1] + pixels[p + 2]) / 3\r\n                    // Amplitude modulated by A\r\n                    * (pixels[p + 3] / 255)\r\n                ) / 255 * 2\r\n            ) - 1;\r\n        }\r\n\r\n        return buffer;\r\n    }\r\n\r\n    stop() {\r\n        if (this.audio.playing) {\r\n            this.audio.stop();\r\n        } else {\r\n            throw new Error('You can\\'t stop what isn\\'t playing. Can you even hear? Do you even have your fucking speakers turned up?');\r\n        }\r\n    }\r\n\r\n    updateImageData() {\r\n        this.length = this.canvas.getPixelCount();\r\n        this.data = this.canvas.getImageData();\r\n    }\r\n\r\n    async play() {\r\n        let buffer = this.getChunk(0, this.length);\r\n\r\n        console.log(buffer);\r\n\r\n        this.audio.queueBuffer(buffer);\r\n\r\n        this.audio.play();\r\n\r\n        await promiseToCallMeBack(callback => {\r\n            this.audio.bus.once('next', callback);\r\n        });\r\n\r\n        if (this.audio.playing) {\r\n            this.stop();\r\n        }\r\n\r\n        console.log('finished playing source', this.index, this.length);\r\n    }\r\n}\r\n\r\nexport default FaceToSound;","import Bus from 'bus';\r\n\r\nclass HierarchicalBus extends Bus {\r\n    constructor(origin, parent) {\r\n        super(origin);\r\n\r\n        this.parent = parent;\r\n\r\n        this.hookParentIntoBus();\r\n    }\r\n\r\n    hookParentIntoBus() {\r\n        if (this.parent instanceof Bus) {\r\n            let localSignature = null;\r\n\r\n            // Inject stopPropagation method and flag\r\n            this.hook('before-emit', signature => {\r\n                localSignature = signature;\r\n\r\n                signature.propagationStopped = false;\r\n                signature.stopPropagation = () => signature.propagationStopped = true;\r\n            });\r\n\r\n            this.hook('after-emit', (signature, ...args) => {\r\n                // If propagation was not stopped, emit up tree\r\n                if ( ! localSignature || ! localSignature.propagationStopped) {\r\n                    this.parent.emit(signature.event, ...args);\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport default HierarchicalBus;","import Component from 'component';\r\nimport Player from 'components/player';\r\nimport Preview from 'components/preview';\r\nimport Inputs from 'components/inputs';\r\n\r\nclass IDMFFaces extends Component {\r\n    ready() {\r\n        this.app = this;\r\n\r\n        this.inputs = this.component(Inputs);\r\n        this.player = this.component(Player);\r\n\r\n        this.preview = this.component(Preview);\r\n    }\r\n}\r\n\r\n\r\nwindow.idmf = new IDMFFaces;","export class DescopedPromise {\r\n    constructor() {\r\n        let resolve, reject;\r\n\r\n        let promise = new Promise((res, rej) => {\r\n            resolve = res;\r\n            reject = rej;\r\n        });\r\n\r\n        promise.resolve = resolve;\r\n        promise.reject = reject;\r\n\r\n        return promise;\r\n    }\r\n}\r\n\r\nexport function promiseToCallMeBack(hook) {\r\n    let promise = new DescopedPromise();\r\n\r\n    promise.callback = function () {\r\n        promise.resolve(...[].concat(arguments));\r\n    };\r\n\r\n    if (hook) {\r\n        hook(promise.callback);\r\n    }\r\n\r\n    return promise;\r\n}\r\n\r\nexport function async(callback, ...args) {\r\n    if (callback) {\r\n        return async().then(() => callback(...args));\r\n    }\r\n\r\n    return promiseToCallMeBack(callback => {\r\n        callback(...args);\r\n    });\r\n}\r\n\r\nexport function sleep(delay = 0) {\r\n    return promiseToCallMeBack(callback => {\r\n        setTimeout(callback, delay);\r\n    })\r\n}","// removed by extract-text-webpack-plugin"],"sourceRoot":""}